{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/apiRender.js","webpack:///./js/modal-window.js","webpack:///./templates/photo-card.hbs"],"names":["page","query","perPage","key","fetchImages","searchParams","this","fetch","then","response","json","parsedResponse","hits","string","incrementPage","resetPage","refs","searchForm","document","querySelector","galleryList","bottomLine","insertListItems","items","markup","pictureItemTemplate","insertAdjacentHTML","addEventListener","e","preventDefault","input","currentTarget","elements","innerHTML","apiService","searchQuery","value","images","catch","error","console","warn","setTimeout","globalScrollHeight","scrollHeight","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","scrollTo","top","behavior","rootMargin","observe","galleryGrid","modalWindow","currentImage","overlayArea","closeModal","target","classList","remove","removeEventListener","srcset","add","src","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"qKAEe,GACbA,KAAM,EACNC,MAAO,GACPC,QAAS,GACTC,IAAK,qCAELC,YANa,WAOX,IAAMC,EAAe,KAAKC,KAAKL,MAAb,eACVK,KAAKN,KADK,mBAENM,KAAKJ,QAFC,cAGXI,KAAKH,IAEZ,OAAOI,MAdK,oEAcWF,GACpBG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACJ,OAAOA,EAAeC,SAI5B,kBACE,OAAON,KAAKL,OAGd,gBAAgBY,GACdP,KAAKL,MAAQY,GAGfC,cA3Ba,WA4BXR,KAAKN,MAAQ,GAGfe,UA/Ba,WAgCXT,KAAKN,KAAO,I,qBC/BVgB,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,YAAaF,SAASC,cAAc,YACpCE,WAAYH,SAASC,cAAc,wBA6BrC,SAASG,EAAgBC,GACvB,IAAMC,EAASC,IAAoBF,GACnCP,EAAKI,YAAYM,mBAAmB,YAAaF,GA5BnDR,EAAKC,WAAWU,iBAAiB,UAEjC,SAAiCC,GAC/BA,EAAEC,iBAEF,IACMC,EADOF,EAAEG,cACIC,SAAS/B,MA0B5Be,EAAKI,YAAYa,UAAY,GAvB7BC,EAAWnB,YACXmB,EAAWC,YAAcL,EAAMM,MAE/BF,EACG9B,cACAI,MAAK,SAAA6B,GACJf,EAAgBe,MAEjBC,OAAM,SAAAC,GACLC,QAAQC,KAAKF,MAGjBG,YAAW,WAcb,IACMC,IAAqB3B,EAAKI,YAAYwB,aA0BzB,IAAIC,sBArBL,SAACC,EAASC,GACxBD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,iBACRhB,EAAWpB,gBACXoB,EACG9B,cACAI,MAAK,SAAA6B,GACJf,EAAgBe,GAChBM,GAAsBA,EACtBQ,SAAS,CACPC,IAAK,GAAGT,EACRU,SAAU,cAGbf,OAAM,SAAAC,GACLC,QAAQC,KAAKF,YAnBP,CACde,WAAY,SA0BLC,QAAQvC,EAAKK,cAzCnB,Q,wCChCL,IAAMmC,EAActC,SAASC,cAAc,YACrCsC,EAAcvC,SAASC,cAAc,mBACrCuC,EAAexC,SAASC,cAAc,oBACtCwC,EAAczC,SAASC,cAAc,yBAe3C,SAASyC,EAAWhC,GACdA,EAAEiC,SAAWF,IACfF,EAAYK,UAAUC,OAAO,WAC7BN,EAAYO,oBAAoB,QAASJ,GACzCF,EAAaO,OAAS,IAjB1BT,EAAY7B,iBAAiB,SAE7B,SAAmBC,GAIjB,GAHAA,EAAEC,iBACF4B,EAAY9B,iBAAiB,QAASiC,GAElChC,EAAEiC,SAAWjC,EAAEG,cACjB,OAEF0B,EAAYK,UAAUI,IAAI,WAC1BR,EAAaS,IAAMvC,EAAEiC,OAAOI,W,qBCf9B,IAAIG,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,0DACHJ,SAASP,EAAqI,OAA3HA,EAASS,EAAeZ,EAAQ,mBAA+B,MAAVD,EAAiBa,EAAeb,EAAO,iBAAmBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,gBAAgB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC3U,UACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeZ,EAAQ,kBAA8B,MAAVD,EAAiBa,EAAeb,EAAO,gBAAkBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACxU,UACAO,SAASP,EAAmH,OAAzGA,EAASS,EAAeZ,EAAQ,UAAsB,MAAVD,EAAiBa,EAAeb,EAAO,QAAUA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAChT,mIACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeZ,EAAQ,cAA0B,MAAVD,EAAiBa,EAAeb,EAAO,YAAcA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC3T,+GACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACpT,qHACAO,SAASP,EAA6H,OAAnHA,EAASS,EAAeZ,EAAQ,eAA2B,MAAVD,EAAiBa,EAAeb,EAAO,aAAeA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAChU,iHACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACpT,yDACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASL,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIiB,EAON,OAA+R,OAAtRA,GAPsBrB,EAAUc,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWd,EAAQ,QAAQkB,KAAe,MAAVnB,EAAiBA,EAAUD,EAAUO,aAAe,GAAIN,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUsB,QAAQ,EAAGlB,EAAM,GAAG,QAAUJ,EAAUuB,KAAK,KAAOnB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAAiBiB,EAAS,IAC/S,SAAU,M","file":"main.9bc02e871611d6b669cd.js","sourcesContent":["const mainUrl = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&`;\r\n\r\nexport default {\r\n  page: 1,\r\n  query: '',\r\n  perPage: 12,\r\n  key: '16768453-e9e01aacbda51e04761bf85fa',\r\n\r\n  fetchImages() {\r\n    const searchParams = `q=${this.query}\r\n    &page=${this.page}\r\n    &per_page=${this.perPage}\r\n    &key=${this.key}`;\r\n\r\n    return fetch(mainUrl + searchParams)\r\n      .then(response => response.json())\r\n      .then(parsedResponse => {\r\n        return parsedResponse.hits;\r\n      });\r\n  },\r\n\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","import apiService from './apiService';\r\nimport pictureItemTemplate from '../templates/photo-card.hbs';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  galleryList: document.querySelector('#gallery'),\r\n  bottomLine: document.querySelector('#scroll-bottom-line'),\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\n\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n\r\n  const form = e.currentTarget;\r\n  const input = form.elements.query;\r\n\r\n  clearListItems();\r\n  apiService.resetPage();\r\n  apiService.searchQuery = input.value;\r\n\r\n  apiService\r\n    .fetchImages()\r\n    .then(images => {\r\n      insertListItems(images);\r\n    })\r\n    .catch(error => {\r\n      console.warn(error);\r\n    });\r\n\r\n  setTimeout(() => {\r\n    loadMore();\r\n  }, 1000);\r\n}\r\n\r\nfunction insertListItems(items) {\r\n  const markup = pictureItemTemplate(items);\r\n  refs.galleryList.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction clearListItems() {\r\n  refs.galleryList.innerHTML = '';\r\n}\r\n\r\nfunction loadMore() {\r\n  let globalScrollHeight = refs.galleryList.scrollHeight;\r\n  const options = {\r\n    rootMargin: '50px',\r\n  };\r\n\r\n  const onEntry = (entries, observer) => {\r\n    entries.forEach(entry => {\r\n      if (entry.isIntersecting) {\r\n        apiService.incrementPage();\r\n        apiService\r\n          .fetchImages()\r\n          .then(images => {\r\n            insertListItems(images);\r\n            globalScrollHeight += globalScrollHeight;\r\n            scrollTo({\r\n              top: `${globalScrollHeight}`,\r\n              behavior: 'smooth',\r\n            });\r\n          })\r\n          .catch(error => {\r\n            console.warn(error);\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  const observer = new IntersectionObserver(onEntry, options);\r\n\r\n  observer.observe(refs.bottomLine);\r\n}\r\n","const galleryGrid = document.querySelector('#gallery');\r\nconst modalWindow = document.querySelector('div.js-lightbox');\r\nconst currentImage = document.querySelector('.lightbox__image');\r\nconst overlayArea = document.querySelector('div.lightbox__content');\r\n\r\ngalleryGrid.addEventListener('click', openModal);\r\n\r\nfunction openModal(e) {\r\n  e.preventDefault();\r\n  modalWindow.addEventListener('click', closeModal);\r\n\r\n  if (e.target === e.currentTarget) {\r\n    return;\r\n  }\r\n  modalWindow.classList.add('is-open');\r\n  currentImage.src = e.target.srcset;\r\n}\r\n\r\nfunction closeModal(e) {\r\n  if (e.target === overlayArea) {\r\n    modalWindow.classList.remove('is-open');\r\n    modalWindow.removeEventListener('click', closeModal);\r\n    currentImage.srcset = '';\r\n  }\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img srcset=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":17},\"end\":{\"line\":4,\"column\":34}}}) : helper)))\n    + \"\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":41},\"end\":{\"line\":4,\"column\":57}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":64},\"end\":{\"line\":4,\"column\":72}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":8},\"end\":{\"line\":9,\"column\":20}}}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":8},\"end\":{\"line\":13,\"column\":17}}}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":8},\"end\":{\"line\":17,\"column\":21}}}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":8},\"end\":{\"line\":21,\"column\":17}}}) : helper)))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}